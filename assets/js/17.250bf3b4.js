(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{240:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类","aria-hidden":"true"}},[s._v("#")]),s._v(" 类")]),s._v(" "),a("h2",{attrs:{id:"为什么这些空类的行为很奇怪？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么这些空类的行为很奇怪？","aria-hidden":"true"}},[s._v("#")]),s._v(" 为什么这些空类的行为很奇怪？")]),s._v(" "),a("blockquote",[a("p",[s._v("我写下这段代码，并期望它抛出错误")])]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Empty")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* empty */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" e2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Empty "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("请参阅此问题「"),a("router-link",{attrs:{to:"/faqs/type-system-behavior.html#为什么所有的类型，都能赋值给一个空的接口？"}},[s._v("为什么所有的内容都能赋值给空的接口")]),s._v("」。值得重新思考一下这个答案的建议：一般来说，你永远不应该声明一个没有属性的类。即使对于子类也是如此：")],1),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  important"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  properties"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bravo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("code",[s._v("Alpha")]),s._v(" 和 "),a("code",[s._v("Bravo")]),s._v(" 的结构相同，都是继承自 "),a("code",[s._v("Base")]),s._v("，这会产生许多令人惊讶的效果，所以别这么做。如果你想让 "),a("code",[s._v("Alpha")]),s._v(" 与 "),a("code",[s._v("Bravo")]),s._v(" 不相同，为它们各自提供一个属性。")]),s._v(" "),a("h2",{attrs:{id:"什么是名义上的类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是名义上的类","aria-hidden":"true"}},[s._v("#")]),s._v(" 什么是名义上的类")]),s._v(" "),a("p",[s._v("这两段代码该如何解释：")]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bravo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Charlie")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Delta")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bravo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  c "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Charlie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Delta")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\na "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// OK")]),s._v("\nc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Error")]),s._v("\n")])])]),a("p",[s._v("在 TypeScript 中，类进行结构上的比较，有一个例外是对于 "),a("code",[s._v("private")]),s._v(" 与 "),a("code",[s._v("protected")]),s._v(" 的成员。当一个成员是 "),a("code",[s._v("private")]),s._v(" 或者 "),a("code",[s._v("protected")]),s._v(" 时，它们必须来自同一个声明，才能被视为与另一个 "),a("code",[s._v("private")]),s._v(" 或者 "),a("code",[s._v("protected")]),s._v(" 的成员相同。")]),s._v(" "),a("h2",{attrs:{id:"为什么在我的实例方法中，this-成了一个「孤儿」？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么在我的实例方法中，this-成了一个「孤儿」？","aria-hidden":"true"}},[s._v("#")]),s._v(" 为什么在我的实例方法中，"),a("code",[s._v("this")]),s._v(" 成了一个「孤儿」？")]),s._v(" "),a("blockquote",[a("p",[s._v("我写下如下代码")])]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClass")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("someCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Prints 'undefined', not 10")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// Throws error "this.method is not a function"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("someCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("可能会提出一些相似的问题：")]),s._v(" "),a("ul",[a("li",[s._v("为什么在我的回调函数中类的属性没有定义？")]),s._v(" "),a("li",[s._v("为什么在我的回调函数中，"),a("code",[s._v("this")]),s._v(" 指向 "),a("code",[s._v("window")]),s._v("？")]),s._v(" "),a("li",[s._v("为什么在我的回调函数中，"),a("code",[s._v("this")]),s._v(" 指向 "),a("code",[s._v("undefined")]),s._v("？")]),s._v(" "),a("li",[s._v("为什么我会得到 "),a("code",[s._v("this.someMethod is not a function")]),s._v(" 的错误？")]),s._v(" "),a("li",[s._v("为什么我会得到 "),a("code",[s._v("Cannot read property 'someMethod' of undefined")]),s._v(" 的错误？")])]),s._v(" "),a("p",[s._v("在 JavaScript 中，"),a("code",[s._v("this")]),s._v(" 值由以下确定：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("该函数是调用 "),a("code",[s._v(".bind")]),s._v(" 的结果吗？如果是这样，"),a("code",[s._v("this")]),s._v(" 由传递给 "),a("code",[s._v("bind")]),s._v(" 的第一个参数确定")])]),s._v(" "),a("li",[a("p",[s._v("该函数是通过属性表达式 "),a("code",[s._v("expr.method() ?")]),s._v(" 直接调用吗？如果是这样，"),a("code",[s._v("this")]),s._v(" 指向 "),a("code",[s._v("expr")])])]),s._v(" "),a("li",[a("p",[s._v("否则，"),a("code",[s._v("this")]),s._v(" 是 "),a("code",[s._v("undefined")]),s._v("（在严格模式中），或者是 "),a("code",[s._v("window")]),s._v(" （非严格模式中）。")])])]),s._v(" "),a("p",[s._v("在上一个例子中，影响结果的是这行代码：")]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[s._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("someCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("在这里，我们提供了 "),a("code",[s._v("obj.someCallback")]),s._v(" 到 "),a("code",[s._v("setTimeout")]),s._v(" 的函数引用，然后该函数并不是作为 "),a("code",[s._v("bind")]),s._v(" 的结果调用，也不是直接作为一个方法调用。因此在 "),a("code",[s._v("someCallback")]),s._v(" 里的 "),a("code",[s._v("this")]),s._v(" 指向 "),a("code",[s._v("window")]),s._v("（或者在严格模式下的 "),a("code",[s._v("undefied")]),s._v("）。")]),s._v(" "),a("p",[s._v("这里概述了一些解决办法：http://stackoverflow.com/a/20627988/1704166")]),s._v(" "),a("h2",{attrs:{id:"当-bar-是一个-class-时，bar-和-typeof-bar-有什么区别？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#当-bar-是一个-class-时，bar-和-typeof-bar-有什么区别？","aria-hidden":"true"}},[s._v("#")]),s._v(" 当 "),a("code",[s._v("Bar")]),s._v(" 是一个 "),a("code",[s._v("class")]),s._v(" 时，"),a("code",[s._v("Bar")]),s._v(" 和 "),a("code",[s._v("typeof Bar")]),s._v(" 有什么区别？")]),s._v(" "),a("blockquote",[a("p",[s._v("我写下这段代码，但是我不理解我为什么会得到错误：")])]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyClass")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" MyClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Cannot assign 'typeof MyClass' to MyClass? Huh?")]),s._v("\nx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MyClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("在 JavaScript 中，类仅仅是个函数，这点很重要。我们将类对象本身 -- "),a("code",[s._v("MyClass")]),s._v(" 的值，作为是构造函数。当一个构造函数被 "),a("code",[s._v("new")]),s._v(" 调用时，我们得到一个对象，它是该类的实例。")]),s._v(" "),a("p",[s._v("因此，当我们定义一个类时，实际上，我们定义了两个不同的类型。")]),s._v(" "),a("p",[s._v("第一个是由类的名字推导而来，在这个例子中是 "),a("code",[s._v("MyClass")]),s._v("。这个是类实例的类型，它定义了类的实例具有的属性和方法，它是一个通过调用类的构造函数来返回的类型。")]),s._v(" "),a("p",[s._v("第二个类型是一个匿名的类型，它是构造函数具有的类型。它包含一个返回类实例的构造函数签名（可以使用 "),a("code",[s._v("new")]),s._v(" 调用），同时，它也包含类中可能含有的 "),a("code",[s._v("static")]),s._v(" 属性和方法。它也通常被称为「静态方面」，因为它包含那些静态成员（以及作为类的构造函数）。我们可以用 "),a("code",[s._v("typeof")]),s._v(" 来引用此类型。")]),s._v(" "),a("p",[s._v("当在类型位置使用 "),a("code",[s._v("typeof")]),s._v(" 操作符时，描述了表达式的类型。因此 "),a("code",[s._v("typeof MyClass")]),s._v(" 是指 "),a("code",[s._v("MyClass")]),s._v(" 的类型。")]),s._v(" "),a("h2",{attrs:{id:"为什么我的子类属性初始值设定会覆盖基类构造函数中设置的值？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么我的子类属性初始值设定会覆盖基类构造函数中设置的值？","aria-hidden":"true"}},[s._v("#")]),s._v(" 为什么我的子类属性初始值设定会覆盖基类构造函数中设置的值？")]),s._v(" "),a("p",[s._v("有关此问题，和其他初始化顺序问题，请参阅 "),a("a",{attrs:{href:"https://github.com/Microsoft/TypeScript/issues/1617",target:"_blank",rel:"noopener noreferrer"}},[s._v("#1617"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"声明类和接口有什么区别？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#声明类和接口有什么区别？","aria-hidden":"true"}},[s._v("#")]),s._v(" 声明类和接口有什么区别？")]),s._v(" "),a("p",[s._v("参阅: http://stackoverflow.com/a/14348084/1704166")]),s._v(" "),a("h2",{attrs:{id:"接口继承类，意味着什么？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口继承类，意味着什么？","aria-hidden":"true"}},[s._v("#")]),s._v(" 接口继承类，意味着什么？")]),s._v(" "),a("blockquote",[a("p",[s._v("这段代码是什么意思？")])]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("这创建了一个名叫 "),a("code",[s._v("Bar")]),s._v(" 的类型，它与 "),a("code",[s._v("Foo")]),s._v(" 的实例具有相同的成员。当 "),a("code",[s._v("Foo")]),s._v(" 具有私有成员时，"),a("code",[s._v("Bar")]),s._v(" 内的相同属性，必须由一个继承自 "),a("code",[s._v("Foo")]),s._v(" 的类实现。总的来说，这种模式是应当避免的，尤其是在 "),a("code",[s._v("Foo")]),s._v(" 有私有成员时。")]),s._v(" "),a("h2",{attrs:{id:"为什么我会得到错误：typeerror-base-class-name-is-not-defined-in-extends？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么我会得到错误：typeerror-base-class-name-is-not-defined-in-extends？","aria-hidden":"true"}},[s._v("#")]),s._v(" 为什么我会得到错误："),a("code",[s._v("TypeError: [base class name] is not defined in __extends")]),s._v("？")]),s._v(" "),a("blockquote",[a("p",[s._v("我写下一段代码，")])]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** file1.ts **/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** file2.ts **/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bravo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("在运行时，有如下错误发生在 "),a("code",[s._v("_extends")]),s._v(" 中：")]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[s._v("Uncaught TypeError"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Alpha "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" not defined\n")])])]),a("p",[s._v("最常见的原因是在你的 HTML 中包含有 file2.ts 的 "),a("code",[s._v("script")]),s._v("，但是并没有包含 "),a("code",[s._v("file1.ts")]),s._v(" 的 "),a("code",[s._v("script")]),s._v("。因此你需要在引用 "),a("code",[s._v("file2.ts")]),s._v(" 之前引用 "),a("code",[s._v("file1.ts")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"为什么我会得到-typeerror-cannot-read-property-prototype-of-undefined-in-extends-的错误？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么我会得到-typeerror-cannot-read-property-prototype-of-undefined-in-extends-的错误？","aria-hidden":"true"}},[s._v("#")]),s._v(" 为什么我会得到 "),a("code",[s._v("TypeError: Cannot read property 'prototype' of undefined\" in __extends")]),s._v(" 的错误？")]),s._v(" "),a("blockquote",[a("p",[s._v("我写下如下代码：")])]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** file1.ts **/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** file2.ts **/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bravo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Alpha")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("在运行时，有如下错误发生在 "),a("code",[s._v("_extends")]),s._v(" 中：")]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[s._v("Uncaught TypeError"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Cannot read property "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'prototype'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v("\n")])])]),a("p",[s._v("出现这种情况，原因可能有一些。")]),s._v(" "),a("p",[s._v("首先，在单个文件中，你在基类之前定义了派生类，那么你应该重新排序文件，以便在派生类之前声明基类。")]),s._v(" "),a("p",[s._v("如果你使用了 "),a("code",[s._v("--out")]),s._v(" 的编译选项，编译器可能会对你希望文件的顺序感到困惑。请参阅常见问题简答中「如果控制文件排序」部分")]),s._v(" "),a("p",[s._v("如果您没有使用 "),a("code",[s._v("--out")]),s._v("，HTML 文件中的 "),a("code",[s._v("script")]),s._v(" 引用文件的顺序可能出现错误。重新排序 "),a("code",[s._v("script")]),s._v(" 对文件的引用，以便在定义派生类的文件之前包含定义基类的文件。")]),s._v(" "),a("p",[s._v("最后，如果你使用某种类型的第三方包，该包可能会错误地排序了文件。请参阅该工具的文档以了解如何在结果输出中正确排序输入文件。")]),s._v(" "),a("h2",{attrs:{id:"为什么不扩展-error、array、map-内置函数？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么不扩展-error、array、map-内置函数？","aria-hidden":"true"}},[s._v("#")]),s._v(" 为什么不扩展 "),a("code",[s._v("Error")]),s._v("、"),a("code",[s._v("Array")]),s._v("、"),a("code",[s._v("Map")]),s._v(" 内置函数？")]),s._v(" "),a("p",[s._v("在 ES2015 中，返回一个对象的构造函数将 "),a("code",[s._v("this")]),s._v(" 的值隐式替换为 "),a("code",[s._v("super(...)")]),s._v(" 的任何调用者。这对于构造函数代码捕获 "),a("code",[s._v("super(...)")]),s._v(" 的任何潜在返回值并将其替换为 "),a("code",[s._v("this")]),s._v(" 是必要的。")]),s._v(" "),a("p",[s._v("这样导致的结果是："),a("code",[s._v("Error")]),s._v("、"),a("code",[s._v("Array")]),s._v(" 等子类将不再按预期工作。这是由于 "),a("code",[s._v("Error")]),s._v("、"),a("code",[s._v("Array")]),s._v(" 等的构造函数使用 ECMAScript6 中的 "),a("code",[s._v("new.target")]),s._v(" 来调整原型链。但是，在 ECMAScript 5 中调用构造函数时，无法确保 "),a("code",[s._v("new.target")]),s._v(" 的值。在其他一些低水平的编译器通常都有相同的限制。")]),s._v(" "),a("h3",{attrs:{id:"例如："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例如：","aria-hidden":"true"}},[s._v("#")]),s._v(" 例如：")]),s._v(" "),a("p",[s._v("如下作为一个子类：")]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FooError")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("你可能会发现：")]),s._v(" "),a("ul",[a("li",[s._v("通过这些子类的构造函数返回的对象中，方法可能是 "),a("code",[s._v("undefined")]),s._v("。因此，当调用 "),a("code",[s._v("sayHello")]),s._v(" 时，会抛出一个错误。")]),s._v(" "),a("li",[a("code",[s._v("instanceof")]),s._v(" 将会在子类的实例和自身实例中被中断。因此 "),a("code",[s._v("new FooError() instanceof FooError")]),s._v(" 将返回 "),a("code",[s._v("false")]),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐","aria-hidden":"true"}},[s._v("#")]),s._v(" 推荐")]),s._v(" "),a("p",[s._v("作为一个推荐方式，你可以在 "),a("code",[s._v("super(...)")]),s._v(" 被调用之后手动调整原型。")]),s._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FooError")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Set the prototype explicitly.")]),s._v("\n    Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setPrototypeOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" FooError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("然而，任何 "),a("code",[s._v("FooError")]),s._v(" 的子类将不得不手动设置原型。在运行时，对于那些不支持 "),a("code",[s._v("Object.setPrototypeOf")]),s._v(" 属性的，你可能用要 "),a("code",[s._v("__proto__")]),s._v(" 来替代他。")]),s._v(" "),a("p",[s._v("不幸的是，"),a("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/microsoft-edge/dev-guide/whats-new/javascript-version-information",target:"_blank",rel:"noopener noreferrer"}},[s._v("IE 10 及其一下不兼容这些方法"),a("OutboundLink")],1),s._v("。你可以手动将原型中的方法复制到实例本身，(例如："),a("code",[s._v("FooError.prototype")]),s._v(" 复制到 "),a("code",[s._v("this")]),s._v(" 上)，但是对于原型链本身是无法修复的。")])])},[],!1,null,null,null);t.default=e.exports}}]);